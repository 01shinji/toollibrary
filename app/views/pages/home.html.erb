 <div class="row">
   <div id="home-left" class="col-md-12 col-sm-12 col-xs-12">
   <!-- Google Map -->
    <div id="map"></div>
   </div>


 </div>

 <div class="" id="home-listings">
   <div class="row listings-list">
    <%= render partial: "listings/listings_list", locals: {listings: @listings} %>
   </div>
 </div>

 <p class=" " id="motion">
  <span class="">ğŸŒŠğŸ„</span>
 </p>

 <!-- æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
 <%= form_tag search_path, method: :get do %>

  <div class="row search-form">
   <!-- ä½æ‰€ã‹ã‚‰æ¤œç´¢ -->
   <%= hidden_field_tag :lat %>
   <%= hidden_field_tag :lng %>

   <div class="col-md-10 col-sm-10 col-xs-10 box">
     <%= text_field_tag :search, params[:search], placeholder: "ä¾‹:ç¥å¥ˆå·çœŒè—¤æ²¢å¸‚", class: "form-control search-location", id: "autolocation" %>
   </div>

   <div class="col-md-2 col-sm-2 col-xs-2 box">
     <%= submit_tag "æ¤œç´¢", class: "search-short white b-green" %>
   </div>
 </div>
 <% end %>



<script>
$("#motion").click(function(){
 $('#motion').addClass('animated infinite slideOutLeft');
});
</script>

<script>
  $('#start_date').datepicker({
    dateFormat: 'yy/mm/dd',
    minDate: 0,
    maxDate: '3m',
    onSelect: function(selected) {
      $('#end_date').datepicker("option", "minDate", selected);
      $('#end_date').attr("disabled", false);
    }
  });

  $('#end_date').datepicker({
    dateFormat: 'yy/mm/dd',
    minDate: 0,
    maxDate: '3m',
    onSelect: function(selected) {
      $('#start_date').datepicker("option", "maxDate", selected);
    }
  });


</script>


<script>
// FAQã®ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³
$(".local").click(function(){
    var $answer=$(this).find(".local-list");
    if ($answer.hasClass("open")) {
      $answer.removeClass("open");
      $answer.slideUp();
      $(this).find("span").text("+");
    }else{
      $answer.addClass("open");
      $answer.slideDown();
      $(this).find("span").text("-");
    }
  });
</script>

<script>
function init() {

  map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 35.2, lng: 139.731992
},
    zoom: 8.8,
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚»ãƒƒãƒˆéè¡¨ç¤º
    disableDefaultUI: true,
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æƒ…å ±ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦éè¡¨ç¤º
    clickableIcons: false
  });

  var input = /** @type {!HTMLInputElement} */(
      document.getElementById('autolocation'));

  var autocomplete = new google.maps.places.Autocomplete(input);

  var data = new Array();

  // åƒè‘‰
  data.push({
   lat: '35.704110', //ç·¯åº¦
   lng: '140.844648', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=åƒè‘‰çœŒéŠšå­å¸‚æ½®è¦‹ç”º&commit=æ¤œç´¢"
  });
  data.push({
   lat: '35.510721', //ç·¯åº¦
   lng: '140.446380', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=åƒè‘‰çœŒå±±æ­¦éƒ¡ä¹åä¹é‡Œç”ºç‰‡è²&commit=æ¤œç´¢"
  });
  data.push({
   lat: '35.355873', //ç·¯åº¦
   lng: '140.388274', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=åƒè‘‰çœŒé•·ç”Ÿéƒ¡ä¸€å®®ç”ºæ±æµªè¦‹&commit=æ¤œç´¢"
  });
  data.push({
   lat: '35.293079', //ç·¯åº¦
   lng: '140.403677', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=åƒè‘‰çœŒã„ã™ã¿å¸‚å²¬ç”ºå’Œæ³‰ï¼”ï¼”ï¼”ï¼˜âˆ’ï¼‘&commit=æ¤œç´¢"
  });
  data.push({
   lat: '35.165243', //ç·¯åº¦
   lng: '140.332695', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=åƒè‘‰çœŒå‹æµ¦å¸‚éƒ¨åŸ&commit=æ¤œç´¢"
  });
  data.push({
   lat: '35.105099', //ç·¯åº¦
   lng: '140.103352', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=åƒè‘‰çœŒé´¨å·å¸‚æ¨ªæ¸š&commit=æ¤œç´¢"
  });
  data.push({
   lat: '35.040621', //ç·¯åº¦
   lng: '140.019128', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=åƒè‘‰çœŒå—æˆ¿ç·å¸‚å’Œç”°ç”ºä»æˆ‘æµ¦&commit=æ¤œç´¢"
  });
  data.push({
   lat: '34.975407', //ç·¯åº¦
   lng: '139.958146', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=åƒè‘‰çœŒå—æˆ¿ç·å¸‚åƒå€‰ç”ºç€¬æˆ¸&commit=æ¤œç´¢"
  });
  data.push({
    title: "",
   lat: '34.924269', //ç·¯åº¦
   lng: '139.829140', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=åƒè‘‰çœŒé¤¨å±±å¸‚ç›¸æµœ&commit=æ¤œç´¢"
  });
  // æ¹˜å—
  data.push({
   lat: '35.302457', //ç·¯åº¦
   lng: '139.525644', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=ç¥å¥ˆå·çœŒéŒå€‰å¸‚ç¨²æ‘ã‚¬å´ï¼‘ä¸ç›®ï¼‘ï¼™&commit=æ¤œç´¢"
  });
  data.push({
   lat: '35.315711', //ç·¯åº¦
   lng: '139.470007', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=ç¥å¥ˆå·çœŒè—¤æ²¢å¸‚éµ æ²¼æµ·å²¸ï¼‘ä¸ç›®ï¼‘ï¼—âˆ’ï¼“&commit=æ¤œç´¢"
  });
  data.push({

   lat: '35.320212', //ç·¯åº¦
   lng: '139.417428', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=ç¥å¥ˆå·çœŒèŒ…ãƒ¶å´å¸‚æ±æµ·å²¸å—ï¼–ä¸ç›®&commit=æ¤œç´¢"
  });
  data.push({
   lat: '35.314952', //ç·¯åº¦
   lng: '139.346261', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=ç¥å¥ˆå·çœŒå¹³å¡šå¸‚é¾åŸã‚±ä¸˜ï¼‘ï¼™&commit=æ¤œç´¢"
  });
  data.push({
   lat: '35.156015', //ç·¯åº¦
   lng: '139.127862', //çµŒåº¦
   url: "/search?utf8=âœ“&lat=&lng=&search=ç¥å¥ˆå·çœŒè¶³æŸ„ä¸‹éƒ¡æ¹¯æ²³åŸç”ºå‰æµœ&commit=æ¤œç´¢"
  });


  for (i = 0; i < data.length; i++) {
   var marker = new google.maps.Marker({
     position: new google.maps.LatLng(data[i].lat, data[i].lng),
     map: map,
     icon: {url: 'assets/wave.png',scaledSize: new google.maps.Size(35, 35)}
   });

   //ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰æŒ‡å®šã—ãŸurlã«é·ç§»ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ
   google.maps.event.addListener(marker, 'click', (function(url){
     return function(){ location.href = url; };
   })(data[i].url));
 }


 marker.setMap(map);


  autocomplete.addListener('place_changed', function() {

    var place = autocomplete.getPlace();
    var lat = place.geometry.location.lat();
    var lng = place.geometry.location.lng();

    document.getElementById('lat').value = lat ;
    document.getElementById('lng').value = lng ;

    if (!place.geometry) {
      window.alert("Autocomplete's returned place contains no geometry");
      return;
    }

  });
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA7ZRYgtCagsAWTqGbqxkpW09Y1i_ZYixI&libraries=places&callback=init" async defer></script>

<script src="/assets/markerwithlabel.js" type="text/javascript"></script>
